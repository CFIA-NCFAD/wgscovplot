<nav class="navbar fixed-top navbar-expand-lg navbar-light bg-light">
    <div class="container-fluid">
        <span class="navbar-brand mb-0 h1">WGSCOVPLOT</span>
        <div class="navbar-nav nav me-auto mb-2 mb-lg-0">
            <a type="button" class="nav-link active" aria-current="page" data-bs-toggle="tab"
               data-bs-target="#chart-pane" aria-selected="true">Coverage Plot</a>
            <a type="button" class="nav-link" aria-current="page" data-bs-toggle="tab"
               data-bs-target="#varmap-chart-pane" aria-selected="true">Variant Heatmap</a>
            <a type="button" class="nav-link" data-bs-toggle="tab" data-bs-target="#summary-table"
               aria-selected="false">Summary Information</a>
            <a type="button" class="nav-link" data-bs-toggle="tab" data-bs-target="#about"
               aria-selected="false">About</a>
        </div>
    </div>
</nav>

<div class="tab-content" id="nav-tabContent">
    <div class="tab-pane show active" id="chart-pane" role="tabpanel">
        <div class="d-inline-flex">
            <div class="col-2 collapse show small bg-light border" id="control-menu">
                <div class="row mb-1 p-1">
                    <div class="d-flex">
                        <h6>Samples</h6>
                        <span class="text-info ms-1" title="Select samples to show in coverage plot">&#9432;</span>
                    </div>
                    <select id="selectedsamples" class="selected-samples" multiple="multiple">
                        {% for sample in samples_name %}
                        <option value={{sample}}>{{sample}}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="border rounded mb-1">
                    <button class="btn btn-toggle rounded collapsed" data-bs-toggle="collapse"
                            data-bs-target="#axis-options" aria-expanded="false">
                        Axis Options
                    </button >
                    <div class="collapse p-1" id="axis-options">
                        <div class="row">
                            <label for="scale" class="col-sm-4 col-form-label">Y-axis Scale</label>
                            <div class="col-sm-7">
                                <select class="form-select form-select-sm" id="scale" onchange="setScale()">
                                    <option value="value">Linear</option>
                                    <option value="log" selected>Log</option>
                                </select>
                            </div>
                        </div>
                        <div class="row">
                            <label for="ymax" class="col-sm-4 col-form-label">Y-axis Limit</label>
                            <div class="col-sm-7">
                                <div class="input-group">
                                    <input class="form-control form-control-sm" type="number" id="ymax" value={{ max_depth }}
                                           style="width: 30%">
                                    <button class="btn btn-sm btn-primary" type="button" type="button" onclick="setYMax()">
                                        Set
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="row mb-0">
                            <div>
                                <div class="form-check form-switch">
                                    <label class="form-check-label" for="toggle-xaxis-label">Show X-axis Label</label>
                                    <input class="form-check-input" type="checkbox" id="toggle-xaxis-label" checked>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="border rounded mb-1">
                    <button class="btn btn-toggle rounded collapsed" data-bs-toggle="collapse"
                            data-bs-target="#tooltips" aria-expanded="false">
                        Tooltips
                    </button>
                    <div class="collapse p-1" id="tooltips">
                        <div class="row mb-1">
                            <div>
                                <div class="form-check form-switch">
                                    <label class="form-check-label" for="toggle-tooltip">Enable</label>
                                    <span class="text-info ms-1"
                                          title="Select samples to show in coverage plot">&#9432;</span>
                                    <input class="form-check-input" type="checkbox" id="toggle-tooltip" checked>
                                </div>
                            </div>
                        </div>
                        <div class="row mb-1">
                            <div>
                                <div class="form-check form-switch">
                                    <label class="form-check-label" for="fix-tooltip-position">Fix Tooltip
                                        Position</label>
                                    <span class="text-info ms-1"
                                          title="Fix tooltips table either on top-left or top-right of container">&#9432;</span>
                                    <input class="form-check-input" type="checkbox" id="fix-tooltip-position"
                                           unchecked>
                                </div>
                            </div>
                        </div>
                        <div class="row mb-1">
                            <div>
                                <div class="form-check form-switch">
                                    <label class="form-check-label" for="toggle-tooltip-trigger-click">Trigger On
                                        Click</label>
                                    <span class="text-info ms-1"
                                          title="Click mouse to trigger tooltips (default is mouse hover)">&#9432;</span>
                                    <input class="form-check-input" type="checkbox"
                                           id="toggle-tooltip-trigger-click" unchecked>
                                </div>
                            </div>
                        </div>
                        <div class="row mb-1">
                            <div>
                                <div class="form-check form-switch">
                                    <label class="form-check-label" for="toggle-tooltip-variant-sites">Variant
                                        Sites</label>
                                    <span class="text-info ms-1"
                                          title="Trigger tooltips for Variant Sites">&#9432;</span>
                                    <input class="form-check-input" type="checkbox"
                                           id="toggle-tooltip-variant-sites" checked>
                                </div>
                            </div>
                        </div>
                        <div class="row mb-1">
                            <div>
                                <div class="form-check form-switch">
                                    <label class="form-check-label" for="toggle-tooltip-non-variant-sites">Non
                                        Variant Sites</label>
                                    <span class="text-info ms-1"
                                          title="Trigger tooltips for Non Variant Sites">&#9432;</span>
                                    <input class="form-check-input" type="checkbox"
                                           id="toggle-tooltip-non-variant-sites" unchecked>
                                </div>
                            </div>
                        </div>
                        <div class="row mb-1">
                            <div>
                                <div class="form-check form-switch">
                                    <label class="form-check-label" for="toggle-variant-comparison">Compare Variant
                                        Sites/Coverage Stat</label>
                                    <span class="text-info ms-1"
                                          title="Compare Variant Sites, Coverage Statistics across selected samples">&#9432;</span>
                                    <input class="form-check-input" type="checkbox" id="toggle-variant-comparison"
                                           checked>
                                </div>
                            </div>
                        </div>
                        <div class="row mb-1">
                            <div>
                                <div class="form-check form-switch">
                                    <label class="form-check-label" for="toggle-coverage-stat">Coverage
                                        Statistics</label>
                                    <span class="text-info ms-1"
                                          title="Show Coverage Statistics table">&#9432;</span>
                                    <input class="form-check-input" type="checkbox" id="toggle-coverage-stat"
                                           unchecked>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="border rounded mb-1">
                    <button class="btn btn-toggle rounded collapsed" data-bs-toggle="collapse"
                            data-bs-target="#display-options" aria-expanded="false">
                        Display Options
                    </button>
                    <div class="collapse p-1" id="display-options">
                        <div class="row mb-1">
                            <div>
                                <div class="form-check form-switch">
                                    <label class="form-check-label" for="toggle-slider">Show Data Zoom Slider</label>
                                    <input class="form-check-input" type="checkbox" id="toggle-slider" checked>
                                </div>
                            </div>
                        </div>
                        <div class="row mb-1">
                            <label for="start-pos" class="col-sm-4 col-form-label">Zoom Range</label>
                            <div class="col-sm-8">
                                <div class="input-group">
                                    <input type="number" id="start-pos" class="form-control form-control-sm" value=1>
                                    <input type="number" id="end-pos" class="form-control form-control-sm" value={{ref_seq_length}}>
                                </div>
                            </div>
                        </div>
                        <div class="row mb-1">
                            <div class="d-grid gap-2 d-md-flex justify-content-md-between">
                                <button class="btn btn-sm btn-outline-primary" onclick="setDataZoom(0, 0)">Set zoom
                                </button>
                                <button class="btn btn-sm btn-outline-primary"
                                        onclick="setDataZoom(1, {{ref_seq_length}})">Reset zoom
                                </button>
                            </div>
                        </div>
                        <div class="row mb-1">
                            <div>
                                <div class="d-flex">
                                    <label for="chart-height-input" class="form-label">Subplot Height</label>
                                    <output class="text-muted ms-auto" id="chart-height-output">19.0<span>%</span></output>
                                </div>
                                <div>
                                    <input type="range" id="chart-height-input" class="form-range" value="19.0"
                                           min="1.0" max="70.0" step="0.1"
                                           onchange="updateSubPlotHeight(this.value);">
                                </div>
                            </div>
                        </div>
                        <div class="row mb-1">
                            <div>
                                <div class="d-flex">
                                    <label for="chart-left-input" class="form-label">Left Margin</label>
                                    <output class="text-muted ms-auto"
                                                id="chart-left-output">4.0<span>%</span></output>
                                </div>
                                <div>
                                    <input type="range" id="chart-left-input" class="form-range" value="4.0"
                                           min="1.0"
                                           max="50.0" step="0.1" onchange="updateChartLeftMargin(this.value);">
                                </div>
                            </div>
                        </div>
                        <div class="row mb-1">
                            <div>
                                <div class="d-flex">
                                    <label for="chart-right-input" class="form-label">Right Margin</label>
                                    <output class="text-muted ms-auto"
                                            id="chart-right-output">4.0<span>%</span></output>
                                </div>
                                <div>
                                    <input type="range" id="chart-right-input" class="form-range" value="4.0"
                                           min="1.0"
                                           max="50.0" step="0.1" onchange="updateChartRightMargin(this.value);">
                                </div>
                            </div>
                        </div>
                        <div class="row mb-1">
                            <div>
                                <div class="d-flex">
                                    <label class="form-label"> Subplot Top Margin</label>
                                    <output class="text-muted ms-auto"
                                            id="chart-top-output">6.5<span>%</span></output>
                                </div>
                                <div>
                                    <input type="range" id="chart-top-input" class="form-range" value="6.5"
                                           min="0.0"
                                           max="25.0" step="0.1" onchange="updateSubPlotTopMargin(this.value);">
                                </div>
                            </div>
                        </div>
                        <div class="row mb-1">
                            <div class="col-md">
                                <button class="btn btn-sm btn-outline-primary" onclick="resetGridDisplay()">Reset Grid
                                    Display
                                </button>
                            </div>
                        </div>
                        <div class="row mb-1">
                            <div class="col-sm-4">
                                <label for="render-env" class="col-form-label">Renderer</label>
                                <span class="text-info ms-1"
                                      title="Canvas for high performance and export PNG file &#10;SVG for high quality image (SVG file) but slightly lower performance">&#9432;</span>
                            </div>
                            <div class="col-sm-5">
                                <select id="render-env" class="form-select form-select-sm" onchange="initWgscovplotRenderEnv()">
                                    <option value="svg">svg</option>
                                    <option value="canvas" selected>canvas</option>
                                </select>
                            </div>
                        </div>
                        <div class="row mb-1">
                            <div>
                                <div class="form-check form-switch">
                                    <label class="form-check-label" for="toggle-darkmode">Dark Mode</label>
                                    <input class="form-check-input" type="checkbox" id="toggle-darkmode" unchecked>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                {% if gene_feature == true or amplicon == true %}
                <div class="border rounded mb-1">
                    <button class="btn btn-toggle rounded collapsed" data-bs-toggle="collapse"
                            data-bs-target="#gene-features" aria-expanded="false">
                        Genetic Features
                    </button>
                    <div class="collapse p-1" id="gene-features">
                        <div class="row">
                            <div class="d-flex">
                                <label class="form-label">Feature Plot Height</label>
                                <output class="text-muted ms-auto"
                                        id="genefeature-height-output">15.0<span>%</span></output>
                            </div>
                            <div>
                                <input type="range" id="genefeature-height-input" class="form-range"
                                       value="15.0" min="1.0"
                                       max="50.0" step="0.1" onchange="updateGeneFeatureHeight(this.value);">
                            </div>
                        </div>
                        {% if gene_feature == true %}
                        <div class="row mb-1">
                            <div>
                                <div class="form-check form-switch">
                                    <label class="form-check-label" for="toggle-genelabel">Show Gene Label</label>
                                    <span class="text-info ms-1"
                                          title="Show Gene Features Names">&#9432;</span>
                                    <input class="form-check-input" type="checkbox" id="toggle-genelabel" checked>
                                </div>
                            </div>
                        </div>
                        {% endif %}
                        {% if amplicon == True %}
                        <div class="form-check form-switch">
                            <label class="form-check-label" for="toggle-amplicon">Show Amplicon</label>
                            <span class="text-info ms-1"
                                  title="Show Amplicon Features and Coverage Bars">&#9432;</span>
                            <input class="form-check-input" type="checkbox" id="toggle-amplicon" checked>
                        </div>
                        {% endif %}
                        <div class="row mb-1">
                            <div class="form-group">
                                <label for="selected-gene-feature-name">Select Features</label>
                                <span class="text-info ms-1"
                                      title="Select interest features and click Apply button for viewing">&#9432;</span>
                                <select id="selected-gene-feature-name" class="form-select form-select-sm"
                                        style="width: 30%" multiple="multiple">
                                    {% for feature_name in gene_feature_name %}
                                    <option value={{sample}}>{{feature_name}}</option>
                                    {% endfor %}
                                </select>
                                <button class="btn btn-sm btn-outline-primary" onclick="applyFeatureView()">Apply
                                </button>
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="d-grid gap-2 col-3 mx-auto">

                            </div>
                        </div>
                    </div>
                </div>
                {% endif %}
                <div class="border rounded mb-1">
                    <button class="btn btn-toggle rounded collapsed" data-bs-toggle="collapse"
                            data-bs-target="#variant-calls" aria-expanded="false">
                        Variant Calls
                    </button>
                    <div class="collapse p-1" id="variant-calls">
                        <div>
                            <div class="form-check form-switch">
                                <label class="form-check-label" for="toggle-mutation">Show Mutations</label>
                                <span class="text-info ms-1"
                                      title="Show mutation under variant sites on X-Axis">&#9432;</span>
                                <input class="form-check-input" type="checkbox" id="toggle-mutation" unchecked>
                            </div>
                        </div>
                        <div>
                            <div class="form-check form-switch">
                                <label class="form-check-label" for="toggle-hideoverlap-mutation">Hide Overlapping
                                    Mutations</label>
                                <span class="text-info ms-1"
                                      title="Hide/Show overlapping mutation display">&#9432;</span>
                                <input class="form-check-input" type="checkbox" id="toggle-hideoverlap-mutation"
                                       checked>
                            </div>
                        </div>
                        <!---
                        <div>
                            <label for="varmap-height-input" class="form-label">Variant Heatmap Height</label>
                            <div class="row">
                                <div class="col-md-9">
                                    <input type="range" id="varmap-height-input" class="form-range" value="50"
                                           min="5"
                                           max="90" step="1" onchange="updateVarMapHeight(this.value);">
                                </div>
                                <div class="col-md-3">
                                    <output style="display: block; text-align:center;" type="text"
                                            id="varmap-height-output">50<span>%</span></output>
                                </div>
                            </div>
                        </div>
                        --->
                    </div>
                </div>
            </div>
            <div class="align-items-stretch bg-light border">
                <button class="btn btn-sm btn-sidebar-hider"
                        id="control-menu-hider"
                        data-bs-toggle="collapse"
                        data-bs-target="#control-menu"
                        title="Hide/Show Options Sidebar"
                        aria-expanded="true"
                ></button>
            </div>
            <div id="chart-container" class="flex-grow-1">
                <div id="chart"></div>
            </div>
        </div>
    </div>
    <div class="tab-pane" id="varmap-chart-pane" role="tabpanel">
        <div class="container-fluid" id="varmap-chart"></div>
    </div>
    <div class="tab-pane" id="about" role="tabpanel">
        <div class="container">
            {{ about_html }}
        </div>
    </div>
    <div class="tab-pane" id="summary-table" role="tabpanel">
        <div class="container-fluid">
            {{ summary_info }}
        </div>
    </div>
</div>
