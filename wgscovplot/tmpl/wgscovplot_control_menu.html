<nav class="navbar fixed-top navbar-expand-lg navbar-light bg-light">
    <div class="container-fluid">
        <span class="navbar-brand mb-0 h1">WGSCOVPLOT</span>
        <div class="navbar-nav nav me-auto mb-2 mb-lg-0">
            <a type="button" class="nav-link active" aria-current="page"
               data-bs-toggle="tab" data-bs-target="#chart-pane"
               aria-selected="true">Coverage Plot</a>
            <a type="button" class="nav-link show-for-non-segmented-viruses" aria-current="page" data-bs-toggle="tab"
               data-bs-target="#varmap-chart-pane"
               aria-selected="true">Variant Heatmap</a>
            <a type="button" class="nav-link" data-bs-toggle="tab" data-bs-target="#summary-table"
               aria-selected="false">Summary
                Information</a>
            <a type="button" class="nav-link" data-bs-toggle="tab" data-bs-target="#about"
               aria-selected="false">About</a>
        </div>
    </div>
    </div>
</nav>

<div class="tab-content" id="nav-tabContent">
    <div class="tab-pane show active" id="chart-pane" role="tabpanel">
        <div class="d-inline-flex">
            <div class="col-2 collapse show small bg-light border" id="control-menu">
                <!--- Select Samples ---->
                <div class="row mb-1 p-1">
                    <div class="d-flex">
                        <h6>Samples</h6>
                        <span class="info-icon text-info ms-1" title="Select samples to show in coverage plot">ℹ️</span>
                    </div>
                    <select id="selected-samples" class="selected-samples" multiple="multiple">
                        {% for sample in db.samples %}
                        <option value={{sample}}>{{sample}}</option>
                        {% endfor %}
                    </select>
                </div>
                <!--- Select Segments ---->
                <div class="row mb-1 p-1 show-for-segmented-viruses">
                    <div class="d-flex">
                        <h6>Segments</h6>
                        <span class="info-icon text-info ms-1"
                              title="Select segments to show in coverage plot">ℹ️</span>
                    </div>
                    <select id="selected-segments" class="selected-segments" multiple="multiple">
                        {% for segment in db.segments %}
                        <option value={{segment}}>{{segment}}</option>
                        {% endfor %}
                    </select>
                </div>
                <!--- Axis Options ---->
                <div class="border rounded mb-1">
                    <button class="btn btn-toggle rounded collapsed" data-bs-toggle="collapse"
                            data-bs-target="#axis-options" aria-expanded="false">
                        Axis Options
                    </button>
                    <div class="collapse p-1" id="axis-options">
                        <div class="row">
                            <label for="yaxis-scale" class="col-sm-4 col-form-label">Y-axis Scale</label>
                            <div class="col-sm-7">
                                <select class="form-select form-select-sm" id="yaxis-scale">
                                    <option value="value">Linear</option>
                                    <option value="log" selected>Log</option>
                                </select>
                            </div>
                        </div>
                        <div class="row">
                            <label for="ymax" class="col-sm-4 col-form-label">Y-axis Limit</label>
                            <div class="col-sm-7">
                                <div class="input-group">
                                    <input id="ymax" class="form-control form-control-sm" type="number"
                                           value="">
                                    <button class="btn btn-sm btn-primary" type="button" id="set-ymax">
                                        Set
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="row mb-0">
                            <div>
                                <div class="form-check form-switch">
                                    <label class="form-check-label" for="toggle-xaxis-label">Show X-axis Label</label>
                                    <input class="form-check-input" type="checkbox" id="toggle-xaxis-label" checked>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!--- Tooltips ---->
                <div class="border rounded mb-1">
                    <button class="btn btn-toggle rounded collapsed" data-bs-toggle="collapse"
                            data-bs-target="#tooltips" aria-expanded="false">
                        Tooltips
                    </button>
                    <div class="collapse p-1" id="tooltips">
                        <div class="row mb-1">
                            <div>
                                <div class="form-check form-switch">
                                    <label class="form-check-label" for="toggle-tooltip">Enable</label>
                                    <span class="info-icon text-info ms-1"
                                          title="Select samples to show in coverage plot">ℹ️</span>
                                    <input class="form-check-input" type="checkbox" id="toggle-tooltip" checked>
                                </div>
                            </div>
                        </div>
                        <div class="row mb-1">
                            <div>
                                <div class="form-check form-switch">
                                    <label class="form-check-label" for="fix-tooltip-position">Fix Tooltip
                                        Position</label>
                                    <span class="info-icon text-info ms-1"
                                          title="Fix segmentTooltips table either on top-left or top-right of container">ℹ️</span>
                                    <input class="form-check-input" type="checkbox" id="fix-tooltip-position"
                                           unchecked>
                                </div>
                            </div>
                        </div>
                        <div class="row mb-1">
                            <div>
                                <div class="form-check form-switch">
                                    <label class="form-check-label" for="toggle-tooltip-trigger-click">Show on
                                        click</label>
                                    <span class="info-icon text-info ms-1"
                                          title="Click mouse to trigger segmentTooltips (default is mouse hover)">ℹ️</span>
                                    <input class="form-check-input" type="checkbox"
                                           id="toggle-tooltip-trigger-click" unchecked>
                                </div>
                            </div>
                        </div>
                        <div class="row mb-1">
                            <div>
                                <div class="form-check form-switch">
                                    <label class="form-check-label" for="toggle-tooltip-variant-sites">Variant
                                        Sites</label>
                                    <span class="info-icon text-info ms-1"
                                          title="Trigger segmentTooltips for Variant Sites">ℹ️</span>
                                    <input class="form-check-input" type="checkbox"
                                           id="toggle-tooltip-variant-sites" checked>
                                </div>
                            </div>
                        </div>
                        <div class="row mb-1">
                            <div>
                                <div class="form-check form-switch">
                                    <label class="form-check-label" for="toggle-tooltip-non-variant-sites">Non
                                        Variant Sites</label>
                                    <span class="info-icon text-info ms-1"
                                          title="Trigger segmentTooltips for Non Variant Sites">ℹ️</span>
                                    <input class="form-check-input" type="checkbox"
                                           id="toggle-tooltip-non-variant-sites" unchecked>
                                </div>
                            </div>
                        </div>
                        <div class="row mb-1">
                            <div>
                                <div class="form-check form-switch">
                                    <label class="form-check-label" for="toggle-variant-comparison">Compare info across
                                        samples</label>
                                    <span class="info-icon text-info ms-1"
                                          title="Show table with comparison of variant site and/or coverage stats across shown samples.">ℹ️</span>
                                    <input class="form-check-input" type="checkbox" id="toggle-variant-comparison"
                                           checked>
                                </div>
                            </div>
                        </div>
                        <div class="row mb-1">
                            <div>
                                <div class="form-check form-switch">
                                    <label class="form-check-label" for="toggle-coverage-stat">Coverage
                                        Statistics</label>
                                    <span class="info-icon text-info ms-1"
                                          title="Show Coverage Statistics table">ℹ️</span>
                                    <input class="form-check-input" type="checkbox" id="toggle-coverage-stat"
                                           unchecked>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!--- Display Options ---->
                <div class="border rounded mb-1">
                    <button class="btn btn-toggle rounded collapsed" data-bs-toggle="collapse"
                            data-bs-target="#display-options" aria-expanded="false">
                        Display Options
                    </button>
                    <div class="collapse p-1" id="display-options">
                        <div class="row mb-1 show-for-non-segmented-viruses">
                            <div>
                                <div class="form-check form-switch">
                                    <label class="form-check-label" for="toggle-zoom-slider">Show view region slider</label>
                                    <input class="form-check-input" type="checkbox" id="toggle-zoom-slider" checked>
                                </div>
                            </div>
                        </div>
                        <div class="row mb-3 show-for-non-segmented-viruses">
                            <div class="">
                                <div class="input-group">
                                    <input type="number" id="start-pos" class="form-control form-control-sm" value="">
                                    <input type="number" id="end-pos" class="form-control form-control-sm"
                                           value="">
                                    <button id="show-zoom-region" class="btn btn-sm btn-outline-primary">Show Region</button>
                                </div>
                            </div>
                        </div>
                        <div class="row mb-3 show-for-non-segmented-viruses">
                            <div class="d-grid gap-2 d-md-flex justify-content-md-between">
                                <button id="reset-view" class="btn btn-sm btn-outline-secondary">Reset view</button>
                            </div>
                        </div>
                        <div class="row mb-3">
                            <label for="ymax" class="col-sm-7 col-form-label">Low coverage Threshold</label>
                            <div class="col-sm-5">
                                <div class="input-group">
                                    <input class="form-control form-control-sm" type="number" id="low-threshold"
                                           value={{ db.low_coverage_threshold }}
                                           style="width: 30%">
                                    <button class="btn btn-sm btn-primary" type="button" type="button"
                                            id="set-low-threshold">
                                        Set
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div>
                                <div class="form-check form-switch">
                                    <label class="form-check-label" for="toggle-mutation">Highlight low coverage
                                        regions</label>
                                    <span class="info-icon text-info ms-1"
                                          title="Highlight low coverage regions">ℹ️</span>
                                    <input class="form-check-input" type="checkbox" id="toggle-low-coverage-regions"
                                           checked>
                                </div>
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div>
                                <div class="d-flex">
                                    <label for="chart-height-input" class="form-label">Subplot Height</label>
                                    <output class="text-muted ms-auto" id="chart-height-output">19.0<span>%</span>
                                    </output>
                                </div>
                                <div>
                                    <input type="range" id="chart-height-input" class="form-range" value="19.0"
                                           min="1.0" max="100.0" step="0.1">
                                </div>
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div>
                                <div class="d-flex">
                                    <label for="chart-left-input" class="form-label">Left Margin</label>
                                    <output class="text-muted ms-auto"
                                            id="chart-left-output">4.0<span>%</span></output>
                                </div>
                                <div>
                                    <input type="range" id="chart-left-input" class="form-range" value="4.0"
                                           min="0.0"
                                           max="25.0" step="0.1">
                                </div>
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div>
                                <div class="d-flex">
                                    <label for="chart-right-input" class="form-label">Right Margin</label>
                                    <output class="text-muted ms-auto"
                                            id="chart-right-output">4.0<span>%</span></output>
                                </div>
                                <div>
                                    <input type="range" id="chart-right-input" class="form-range" value="4.0"
                                           min="0.0"
                                           max="25.0" step="0.1">
                                </div>
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div>
                                <div class="d-flex">
                                    <label class="form-label"> Subplot Top Margin</label>
                                    <output class="text-muted ms-auto"
                                            id="chart-top-output">6.5<span>%</span></output>
                                </div>
                                <div>
                                    <input type="range" id="chart-top-input" class="form-range" value="6.5"
                                           min="0.0"
                                           max="25.0" step="0.1">
                                </div>
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-md">
                                <button id="reset-margin" class="btn btn-sm btn-outline-primary">Reset plot
                                    margins and
                                    heights
                                </button>
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-sm-4">
                                <label for="render-env" class="col-form-label">Renderer</label>
                                <span class="info-icon text-info ms-1"
                                      title="Canvas for high performance and export PNG file &#10;SVG for high quality image (SVG file) but slightly lower performance">ℹ️</span>
                            </div>
                            <div class="col-sm-5">
                                <select id="render-env" class="form-select form-select-sm">
                                    <option value="svg">svg</option>
                                    <option value="canvas" selected>canvas</option>
                                </select>
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div>
                                <div class="form-check form-switch">
                                    <label class="form-check-label" for="toggle-dark-mode">Dark Mode</label>
                                    <input class="form-check-input" type="checkbox" id="toggle-dark-mode" unchecked>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!--- Genetic Feature Options ---->
                {% if db.show_genes == true or db.show_amplicons == true %}
                <div class="border rounded mb-1 show-for-non-segmented-viruses">
                    <button class="btn btn-toggle rounded collapsed" data-bs-toggle="collapse"
                            data-bs-target="#gene-features" aria-expanded="false">Genetic Features
                    </button>
                    <div class="collapse p-1" id="gene-features">
                        <div class="row">
                            <div class="d-flex">
                                <label class="form-label">Feature Plot Height</label>
                                <output class="text-muted ms-auto"
                                        id="gene-feature-height-output">15.0<span>%</span></output>
                            </div>
                            <div>
                                <input type="range" id="gene-feature-height-input" class="form-range"
                                       value="15.0" min="1.0"
                                       max="50.0" step="0.1">
                            </div>
                        </div>
                        {% if db.show_genes == true %}
                        <div class="row mb-1">
                            <div>
                                <div class="form-check form-switch">
                                    <label class="form-check-label" for="toggle-gene-label">Show Gene Label</label>
                                    <span class="info-icon text-info ms-1"
                                          title="Show Gene Features Names">ℹ️</span>
                                    <input class="form-check-input" type="checkbox" id="toggle-gene-label" checked>
                                </div>
                            </div>
                        </div>
                        {% endif %}
                        {% if db.show_amplicons == true and db.show_genes == true %}
                        <div class="form-check form-switch">
                            <label class="form-check-label" for="toggle-amplicon">Show Amplicon</label>
                            <span class="info-icon text-info ms-1"
                                  title="Show Amplicon Features and Coverage Bars">ℹ️</span>
                            <input class="form-check-input" type="checkbox" id="toggle-amplicon" checked>
                        </div>
                        {% endif %}
                        <div class="row mb-1">
                            <div class="form-group">
                                <label for="selected-gene-feature-name">Select Features</label>
                                <span class="info-icon text-info ms-1"
                                      title="Select interest features and click Apply button for viewing">ℹ️</span>
                                <select id="selected-gene-feature-name" class="form-select form-select-sm"
                                        style="width: 30%" multiple="multiple">
                                    {% for feature_name in db.echart_features %}
                                    <option value={{feature_name.name}}>{{feature_name.name}}</option>
                                    {% endfor %}
                                </select>
                                <button class="btn btn-sm btn-outline-primary" id="show-selected-gene-feature">Apply
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                {% endif %}
                <!--- Variant Calls ---->
                <div class="border rounded mb-1">
                    <button class="btn btn-toggle rounded collapsed" data-bs-toggle="collapse"
                            data-bs-target="#variant-calls" aria-expanded="false">
                        Variant Calls
                    </button>
                    <div class="collapse p-1" id="variant-calls">
                        <div>
                            <div class="form-check form-switch">
                                <label class="form-check-label" for="toggle-mutation">Show mutation labels</label>
                                <span class="info-icon text-info ms-1"
                                      title="Show mutation under variant sites on X-Axis">ℹ️</span>
                                <input class="form-check-input" type="checkbox" id="toggle-mutation" unchecked>
                            </div>
                        </div>
                        <div>
                            <div class="form-check form-switch">
                                <label class="form-check-label" for="toggle-hide-overlap-mutation">Hide Overlapping
                                    Mutations</label>
                                <span class="info-icon text-info ms-1"
                                      title="Hide/Show overlapping mutation display">ℹ️</span>
                                <input class="form-check-input" type="checkbox" id="toggle-hide-overlap-mutation"
                                       checked>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="align-items-stretch bg-light border">
                <button class="btn btn-sm btn-sidebar-hider"
                        id="control-menu-hider"
                        data-bs-toggle="collapse"
                        data-bs-target="#control-menu"
                        title="Hide/Show Options Sidebar"
                        aria-expanded="true"
                ></button>
            </div>
            <div id="chart-container" class="flex-grow-1">
                <div id="chart"></div>
            </div>
        </div>
    </div>
    <div class="tab-pane" id="varmap-chart-pane" role="tabpanel">
        <div class="container-fluid" id="varmap-chart"></div>
    </div>
    <div class="tab-pane" id="about" role="tabpanel">
        <div class="container">
            {{ about_html }}
        </div>
    </div>
    <div class="tab-pane" id="summary-table" role="tabpanel">
        <div class="container-fluid">
            {{ cov_stats_html }}
        </div>
    </div>
</div>
